<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memory Romantico ðŸ’–</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #ffe6f0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    flex-direction: column;
  }
  h1 {
    color: #ff4d6d;
  }
  #game {
    display: grid;
    grid-template-columns: repeat(4, 80px);
    grid-gap: 15px;
    margin-top: 20px;
  }
  .card {
    width: 80px;
    height: 80px;
    perspective: 1000px; /* per flip 3D */
  }
  .card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    text-align: center;
    transition: transform 0.6s;
    transform-style: preserve-3d;
    cursor: pointer;
  }
  .card.flipped .card-inner {
    transform: rotateY(180deg);
  }
  .card-front, .card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 40px;
    border-radius: 10px;
    box-shadow: 2px 2px 8px rgba(0,0,0,0.2);
  }
  .card-front {
    background: #fff;
  }
  .card-back {
    background: #ffd6e0;
    transform: rotateY(180deg);
  }
  #message {
    margin-top: 30px;
    font-size: 24px;
    color: #ff1a75;
    text-align: center;
    opacity: 0;
    transition: opacity 1s ease-in-out;
  }
  #message.show {
    opacity: 1;
  }
  #startBtn {
    padding: 10px 20px;
    font-size: 18px;
    background: #ff4d6d;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  }
  #startBtn:hover {
    background: #ff1a75;
  }
</style>
</head>
<body>

<h1>Memory dell'Amore ðŸ’–</h1>
<button id="startBtn">Inizia il Gioco</button>
<div id="game"></div>
<div id="message"></div>

<script>
const cardsArray = ['ðŸ’–','ðŸ’‹','ðŸ˜','ðŸ¥°','ðŸ’Œ','ðŸ’‘','ðŸ˜˜','ðŸ’—'];
let gameCards = [];
let flipped = [];
let matched = [];
let gameStarted = false;

const gameDiv = document.getElementById('game');
const messageDiv = document.getElementById('message');
const startBtn = document.getElementById('startBtn');

const messages = [
  "Sei meravigliosa! ðŸ’–",
  "Ti penso sempre ðŸ˜˜",
  "Sei speciale ðŸ¥°",
  "Un abbraccio virtuale ðŸ¤—",
  "Non smettere mai di sorridere ðŸ˜",
  "Ti voglio bene ðŸ’—"
];

function startGame() {
    gameDiv.innerHTML = '';
    messageDiv.classList.remove('show');
    messageDiv.innerHTML = '';
    flipped = [];
    matched = [];
    gameCards = [...cardsArray, ...cardsArray]; // doppie carte
    shuffle(gameCards);
    gameCards.forEach((emoji, index) => {
        const card = document.createElement('div');
        card.classList.add('card');
        card.dataset.emoji = emoji;
        card.dataset.index = index;

        const inner = document.createElement('div');
        inner.classList.add('card-inner');

        const front = document.createElement('div');
        front.classList.add('card-front');

        const back = document.createElement('div');
        back.classList.add('card-back');
        back.innerHTML = emoji;

        inner.appendChild(front);
        inner.appendChild(back);
        card.appendChild(inner);

        card.addEventListener('click', flipCard);
        gameDiv.appendChild(card);
    });
    gameStarted = true;
}

function shuffle(array) {
    for(let i = array.length -1; i>0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

function flipCard() {
    if(!gameStarted) return;
    if(flipped.length === 2 || this.classList.contains('flipped') || matched.includes(this.dataset.index)) return;

    this.classList.add('flipped');
    flipped.push(this);

    if(flipped.length === 2){
        if(flipped[0].dataset.emoji === flipped[1].dataset.emoji){
            matched.push(flipped[0].dataset.index, flipped[1].dataset.index);
            flipped = [];
            if(matched.length === gameCards.length){
                setTimeout(showMessage, 500);
            }
        } else {
            setTimeout(() => {
                flipped[0].classList.remove('flipped');
                flipped[1].classList.remove('flipped');
                flipped = [];
            }, 800);
        }
    }
}

function showMessage() {
    const randomIndex = Math.floor(Math.random() * messages.length);
    messageDiv.innerHTML = messages[randomIndex];
    messageDiv.classList.add('show');
}

startBtn.addEventListener('click', startGame);
</script>

</body>
</html>